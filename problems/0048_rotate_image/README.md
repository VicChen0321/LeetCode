# 0048. Rotate Image

**LeetCode Link:** [https://leetcode.com/problems/rotate-image/](https://leetcode.com/problems/rotate-image/)
**Difficulty:** Medium
**Tags:** Array, Matrix, Simulation

---

## 題目描述

給定一個 `n x n` 的正方形矩陣 `matrix`，要求 **就地 (in-place)** 將它 **順時針旋轉 90 度**。

要注意：

* 不能建立另一個矩陣來協助計算（必須 in-place 操作）
* `matrix[i][j]` 要旋轉到新的正確位置
* 處理時要避免覆蓋資料，因此旋轉順序很重要

### 範例

**Example 1**

* Input:

  ```
  matrix = [
    [1,2,3],
    [4,5,6],
    [7,8,9]
  ]
  ```

* Output:

  ```
  [
    [7,4,1],
    [8,5,2],
    [9,6,3]
  ]
  ```

**Example 2**

* Input:

  ```
  [
    [5,1,9,11],
    [2,4,8,10],
    [13,3,6,7],
    [15,14,12,16]
  ]
  ```

* Output:

  ```
  [
    [15,13,2,5],
    [14,3,4,1],
    [12,6,8,9],
    [16,7,10,11]
  ]
  ```

---

## 解法概念

### 方法：Matrix 操作（Transpose + Reverse）

此題的經典技巧是：

> **先轉置（transpose）矩陣，再反轉每一 row，即可完成 90 度順時針旋轉。**

#### **1. Transpose（轉置矩陣）**

把 `matrix[i][j]` 與 `matrix[j][i]` 交換。

轉置後矩陣會「沿著主對角線翻轉」。

#### **2. Reverse each row（反轉每一列）**

將轉置後的每一列做 reverse。

這個操作會把矩陣從左到右翻轉，搭配轉置剛好達到 90 度順時針旋轉效果。

---

### 為什麼這樣就能旋轉？

* **轉置**：將行與列交換，讓資料位置部分對齊旋轉結果
* **反轉 row**：將資料推到正確的最終位置

想像原本在左邊的元素，被推到上方，再因為 row 反轉推到右邊，形成順時針效果。

> **關鍵 insight：順時針旋轉 = 轉置 + 每 row 反轉**
> 這是矩陣旋轉問題最常用的優雅解法。

---

## 時間與空間複雜度

* **時間複雜度**：O(n²) — 轉置與反轉都要掃過整個矩陣
* **空間複雜度**：O(1) — 就地操作，不使用額外矩陣
